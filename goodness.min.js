/*! Goodness v0.0.5 2014-03-24 */
!function(a){var b="goodness",c="input:not([type=submit]):not([type=hidden]):not([type=reset]), textarea, select",d={required:/^(?!\s*$).+/},e={inputContainerSelector:"input, textarea, select",validationElementSelector:c,validateOnChange:!1,emitEvents:!1},f=function(c,f){f?f.rules=a.extend({},d,f.rules):f={rules:d},this.element=c,this.$element=a(c),this.options=a.extend({},e,f),this._defaults=e,this._name=b,this.$formControls=this.$element.find(this.options.validationElementSelector),this.init(),this.listen()};f.prototype.init=function(){},f.prototype.listen=function(){this.$element.on("submit",a.proxy(this._onFormSubmit,this)),this.options.validateOnChange&&this.$formControls.on("change",a.proxy(this._onInputChange,this))},f.prototype.isAllGood=function(){var b=this,c=!0;return this.$formControls.each(function(d,e){var f=a(e);b.goodOne(f)||(c=!1)}),c?this.$element.removeClass("error").addClass("good"):this.$element.removeClass("good").addClass("error"),c},f.prototype.goodOne=function(b){var c=this,d=!0,e=!1,f=!1,g=b.closest(c.options.inputContainerSelector),h=g.attr("class");if(!h)return!0;var i=g.attr("class").split(/\s+/);return a.each(i,function(a,h){if(c.options.rules[h]){var i=-1;"function"==typeof c.options.rules[h]?i=c.options.rules[h](b.val(),b,c.$element):c.options.rules[h]instanceof RegExp&&(i=c.options.rules[h].test(b.val())),1===i||i===!0?g.addClass(h+"-good").removeClass(h+"-error"):0===i||i===!1?(g.addClass(h+"-error").removeClass(h+"-good"),d=!1,f=!0):g.removeClass(h+"-good").removeClass(h+"-error"),e=!0}}),f&&e?g.removeClass("good").addClass("error"):d&&e?g.removeClass("error").addClass("good"):g.removeClass("error").removeClass("good"),d},f.prototype.refresh=function(a){return this.$formControls=this.$element.find(this.options.validationElementSelector),a?this.isAllGood():!0},f.prototype.setRule=function(){},f.prototype.getTheGoodness=function(){var b={};return this.$formControls.each(function(c,d){var e=a(d),f=e.attr("name")||e.attr("id")||"form-control-"+c,g=e.is("[type=checkbox]")?e.is(":checked"):e.val();b[f]=g}),b},f.prototype.serialize=f.prototype.getTheGoodness,f.prototype.onSubmit=function(b){return"function"==typeof b&&(this.$element.off("submit"),this.$element.on("submit",a.proxy(function(a){b(this.isAllGood(),this.serialize(),a)},this))),this},f.prototype.submit=function(){this.$element.submit()},f.prototype._onFormSubmit=function(){return this.isAllGood()?!0:!1},f.prototype._onInputChange=function(b){this.goodOne(a(b.currentTarget))},a.fn[b]=function(a){if(1!==this.length)throw new Error("Goodness does not support multiple element selectors. Make sure your selector only returns a single element.");if(!this.is("form"))throw new Error("Goodness should only be called on a form element.");if(!this.data("plugin_"+b)){var c=new f(this,a);return this.data("plugin_"+b,c),c}}}(jQuery,window,document);